# Lighthouse

Lighthouse는 Google에서 개발한 오픈소스 웹 성능 분석 도구.
(웹사이트의 품질을 측정하고 개선할 수 있는 방법을 제공)

Lighthouse란 - 웹 페이지의 성능, 접근성, 프로그레시브 웹 앱(PWA), SEO, 모범 사례 등 다양한 측면을 자동으로 감사하고 점수를 매깁니다.
각 영역 별로 0 ~ 100점으로 척도를 평가하며, 문제점과 개선 방안을 제공

## 주요 측정 영역

1. 성능(Performance) : 로딩 속도, 상호작용 지연 시간, 시각적 안정성 등
2. 접근성(Accessibility) : 다양한 사용자(장애인 포함)가 콘텐츠에 접근할 수 있는 정도
3. 모범 사례(Best Practices) : 웹 개발 모범 사례 준수 여부
4. SEO(검색 엔진 최적화) : 검색 엔진이 페이지를 크롤링하고 인덱싱하기 쉬운 정도
5. PWA(Progressive Web App) : 프로그레시브 웹 앱 요구사항 충족 여부

## Lighthouse 활용 방법

1. 성능 최적화

   - First Contentful Paint(FCP) 개선 : 서버 응답 시간 줄이기, 렌더링 차단 리소스 제거
   - Largest Contentful Paint(LCP) 개선 : 이미지 최적화, 리소스 우선순위 지정
   - Total Blocking Time(TBT) 줄이기 : JavaScript 실행 시간 최적화, 코드 분할
   - Cumulative Layout Shift(CLS) 최소화 : 이미지와 광고에 크기 속성 지정

2. 접근성 개선

   - 대체 텍스트 추가
   - 색상 대비 개선
   - 키보드 탐색 지원(마우스를 사용하지않아도 키보드로만 이용할수있게)
   - ARIA 속성을 올바르게 사용

3. SEO 최적화

   - 메타 태그 개선
   - 검색 엔진 친화적인 URL 구조 사용
   - 모바일 최적화(구글에서 모바일 버전을 우선적으로 고려한다.)
   - robots.txt 및 사이트맵 구현(크롤링에 대한 지침서)

4. 개발 워크플로우 통합

   - CI/CD 파이프라인 : 빌드 과정에서 Lighthouse 검사 자동화
   - 성능 예산 설정 : 점수나 메트릭에 임계값을 설정하여 품질 저하 방지(최소 점수 지정?)
   - A/B 테스트 : 변경 사항이 성능에 미치는 영향 비교

5. 리액트 앱 최적화 예시

   ```

   import { lazy, Suspense } from 'react;

   const HeavyComponent = lazy(() => import('./HeavyComponent'));

   function OptimizedImage({ src, alt}){
       return(
           <img
             src={src}
             alt={alt}
             loading="lazy"
             width="300"
             height="200"
           />
       );
   }

   ```

## 실무 활용 팁

1. 정기적인 점검 : 새 기능 릴리즈나 주요 업데이트 전후에 Lighthouse 검사 수행
2. 경쟁사 벤치마킹 : 경쟁사 웹사이트와 성능 비교
3. 성능 예산 설정 : LCP는 2.5s 이내, JavaScript 크기는 300KB 이내 등 구체적인 목표 설정
4. 사용자 환경 고려 : 실제 사용자가 접속하는 디바이스와 네트워크 조건으로 테스트
5. 우선순위 지정 : 영향력이 큰 문제부터 해결(보통 성능 관련 사항)

P.S

- Lighthouse는 웹 개발 초기 단계부터 배포 후 유자보수까지 전체 개발 생명주기에서 유용한 도구이다.
  정기적으로 활용하여 웹 사이트의 품질을 지속적으로 개선해 나가는게 좋다.

---

# 성능 향상을 위한 팁

## lazy

React.lazy는 코드 스플리팅(Code Splitting)을 구현하는 함수이다.

컴포넌트가 실제로 필요한 시점에만 로드되므로, 초기 번들 크기를 줄이고 성능을 향상시킬 수 있다.

## Suspense

컴포넌트가 로딩될 때까지 대기 상태를 처리하는 React 컴포넌트이다.

React 19에서는 Suspense의 기능이 확장되어 데이터 페칭, 이미지 로딩 등 다양한 비동기 작업을 처리할 수 있다.

Suspense를 사용하면 로딩 상태를 선언적으로 처리할 수 있어 사용자 경험을 향상시킬 수 있다.

# React 19의 lazy와 Suspense의 장점 및 활용 방법

1. 성능 최적화

   - 초기 로딩 시간 단축
   - 필요한 시점에만 코드 로드
   - 사용자 경험 향상(로딩 시간이 단축되므로)

2. 선언적 로딩 상태 처리

   - 복잡한 로딩 로직 최적화
   - 컴포넌트 트리 전체에 대한 로딩 상태 관리 가능
   - 중첩된 Suspense 경계를 통한 로딩 UI의 세분화

3. 코드 분할 용이

   - 큰 번들을 작은 청크로 분할
   - 라우트별, 기능별 코드 분할 구현 가능
   - 사용자가 필요로 하는 코드만 다운로드

4. 데이터 페칭과의 통합
   - React 19에서는 데이터 페칭을 위한 Suspense 지원 강화
   - 데이터 로딩과 UI 로딩을 통합하여 일관된 사용자 경험 제공
   - 워터폴 현상 최소화 및 병렬 데이터 로딩 지원
