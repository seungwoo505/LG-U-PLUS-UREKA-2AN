# useEffect

의미 : 컴포넌트의 렌더링 외에 발생하는 부수 효과를 처리하기 위한 도구

ex)

- 데이터 가져오기 (API 호출)
- 타이머 설정(setTimeout)
- 이벤트 리스너 등록
- 외부 시스템과 연동
  즉, 화면에 보여주는 것 외에 필요한 모든 작업

## 기본 구조

```

useEffect(() => {
  // 마운트 또는 업데이트 될 때 실행

  return () => {
    // 언마운드 될 때 실행할 코드 -  정리(cleanup) 함수 - 선택적
  };
}, [의존성1, 의존성2, ...]); //의존성이 업데이트 되면 useEffect() 재 실행


```

## useEffect의 주요 개념

1. 실행 시점
   - 마운트 시 : 컴포넌트가 처음 화면에 나타날 때( DOM에 처음 그려질 때)
   - 업데이트 시 : 의존성 배열에 있는 값이 변경될 때
   - 언마운트 시 : 컴포넌트가 화면에서 사라질 때 정리 함수 실행( return () => {} -> 이 부분이 실행 됨)
2. 의존성 배열
   - 빈 배열 [] : 컴포넌트가 마운트 될 때 한 번만 실행, 언마운트 시 정리 함수 실행
   - 의존성 포함 [의존성 1, ...] : 해당 값 중 하나라도 변경될 때마다 실행
   - 배열 생략 : 렌더링이 될 때마다 실행
   - 정리
     - 빈 배열 : 한 번만 실행하고 싶을 때
     - 의존성 포함 : 해당 값이 변경될 때 실행하고 싶을 때
     - 배열 생략 : 어떤 값이든 변경될 때(리렌더링 될 때마다)마다 실행하고 싶을 때
3. 정리(Cleanup) 함수
   - 이전 효과를 정리하기 위한 함수
   - 메모리 누수 방지에 중요
     (화면에 사라졌는데 제거를 안하여 메모리에 남아있기 때문에(만약 업데이트가 자주 일어나면 메모리가 계속 찬다) 정리 함수를 통해 사라질 때마다 제거해주는 것이 중요)
   - 이벤트 리스너, 타이머, 구독 등을 해제할 때 필요

## 요약

- useEffect는 렌더링 외의 부수 효과를 처리하는 Hook
- 의존성 배열을 통해 실행 시점 제어 가능
- 정리(Cleanup)함수로 메모리 누수 방지
- 외부 시스템 연결, 데이터 페칭, DOM 조작 등에 활용
